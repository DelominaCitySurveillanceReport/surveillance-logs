<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Delomina Archives — Access Hub</title>
<style>
  :root {
    --bg:#030305;
    --text:#b0f5c8;
    --accent:#7be3b2;
  }
  body {
    background: radial-gradient(circle at top, #010203 0%, #060c12 100%);
    color: var(--text);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    padding: 28px;
  }
  .term {
    background: #02030a;
    border: 1px solid rgba(127,255,200,0.06);
    padding: 18px;
    border-radius: 8px;
    max-width: 800px;
    margin: 40px auto;
    box-shadow: 0 0 30px rgba(0,255,160,0.05);
  }
  h2 {
    color: var(--accent);
    margin: 0 0 10px 0;
    font-size: 20px;
  }
  p, li, a {
    color: var(--text);
    font-size: 14px;
  }
  ul {
    list-style: none;
    padding-left: 0;
  }
  li {
    margin-bottom: 6px;
  }
  a {
    color: var(--accent);
    text-decoration: none;
  }
  a:hover {
    color: #afffd7;
    text-decoration: underline;
  }
  #lockedNote {
    color: #9bf;
    font-size: 13px;
    margin: 8px 0;
  }
  #startBreach a {
    background: #0a2740;
    color: #9be;
    padding: 8px 12px;
    border-radius: 6px;
    text-decoration: none;
    display: inline-block;
    margin-top: 8px;
  }
  #startBreach a:hover {
    background: #11385e;
  }
  #clearToken {
    background: #051018;
    border: 1px solid #073;
    color: #9ef;
    border-radius: 4px;
    padding: 6px 10px;
    cursor: pointer;
    margin-top: 12px;
  }
  #clearToken:hover {
    background: #073;
    color: #010;
  }
  .blink {
    animation: blink 1s step-end infinite;
  }
  @keyframes blink {
    50% { opacity: 0; }
  }
</style>
</head>
<body>
  <div class="term">
    <h2>Delomina City Surveillance Archive</h2>
    <p id="lockedNote">[ ACCESS LOCKED ] — please return to breach utility to obtain clearance.</p>

    <ul id="linksList" style="display:none;">
      <li><a id="linkLog1" href="logs/nv-13_field_report.html">NV-13 Field Report</a></li>
      <li><a id="linkVerify" href="verify.html">Phrase Check</a></li>
    </ul>

    <p id="startBreach" style="margin-top:8px;">
      <a href="hack.html">Open Breach Utility</a>
    </p>

    <button id="clearToken" style="display:none;">Clear Access Token</button>

    <div id="status" style="margin-top:12px; color:#6f9; font-size:13px;"></div>
  </div>

<script>
// ---------- Config ----------
const LINKS = {
  log1: 'logs/nv-13_field_report.html',
  verify: 'verify.html'
};

// ---------- Helpers ----------
function parseTokenFromHash(){
  const h = location.hash || '';
  const m = h.match(/token=([^&]+)/i);
  return m ? decodeURIComponent(m[1]) : null;
}
function getToken(){
  const fromHash = parseTokenFromHash();
  if(fromHash){
    localStorage.setItem('delomina_archive_token', fromHash);
    history.replaceState(null, '', location.pathname + location.search);
    return fromHash;
  }
  return localStorage.getItem('delomina_archive_token');
}
function clearToken(){
  localStorage.removeItem('delomina_archive_token');
  location.reload();
}

// ---------- UI ----------
const linksList = document.getElementById('linksList');
const lockedNote = document.getElementById('lockedNote');
const startBreach = document.getElementById('startBreach');
const linkLog1 = document.getElementById('linkLog1');
const linkVerify = document.getElementById('linkVerify');
const clearBtn = document.getElementById('clearToken');
const statusEl = document.getElementById('status');

window.addEventListener('load', ()=>{
  const token = getToken();
  if(token){
    linksList.style.display = 'block';
    lockedNote.style.display = 'none';
    startBreach.style.display = 'none';
    linkLog1.href = LINKS.log1 + '#token=' + encodeURIComponent(token);
    linkVerify.href = LINKS.verify + '#token=' + encodeURIComponent(token);
    clearBtn.style.display = 'inline-block';
    statusEl.innerHTML = `ACCESS TOKEN <span class="blink">[ ${token} ]</span> VALID — ARCHIVE PORTAL READY`;
  } else {
    linksList.style.display = 'none';
    lockedNote.style.display = 'block';
    startBreach.style.display = 'block';
    clearBtn.style.display = 'none';
    statusEl.textContent = '';
  }
});

clearBtn.addEventListener('click', ()=>{
  if(confirm('Clear stored access token?')) clearToken();
});
</script>
</body>
</html>
